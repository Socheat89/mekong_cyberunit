# Security: Disable Directory Listing
# Options -Indexes

RewriteEngine On
RewriteBase /

# 1. Virtual Path: Map /Mekong_CyberUnit/public/... to /public/...
RewriteRule ^Mekong_CyberUnit/public/(.*)$ public/$1 [L]

# 2. Redirect Root to the Virtual Path (as requested)
RewriteRule ^$ Mekong_CyberUnit/public/ [L,R=301]

# Security: Block direct access to core system folders
RewriteRule ^(config|core|middleware|database|logs|vendor|modules)/(.*)$ - [F,L]

# Handle PHP files directly - Allow specific access to existing PHP files
RewriteCond %{REQUEST_FILENAME} \.php$ [NC]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule . - [L]

# Allow access to existing files and directories (images, css, js)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule . - [L]

# Route EVERYTHING else to index.php
RewriteRule ^(.*)$ index.php [QSA,L]